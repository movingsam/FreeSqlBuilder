@using FreeSql.TemplateEngine
@model BuildTask
@{
    Layout = "_Layout.cshtml";
    var project = Model.Project;
    var allTable = Model.CodeAllTableInfo;
    string[] allDtos = { "Dtos", "PostDataDto", "PageViewDto" };
}

using AutoMapper;
using GRES.Abstractes.Dtos.Users;
using GRES.Abstractes.Entities;

namespace @(project.ProjectName).Abstractes.AutoMapperConfig
{
    /// <summary>
    /// automapper配置文件
    /// </summary>
    public class @(project.ProjectName)AutoMapperProfiles : Profile
    {
        public @(project.ProjectName)AutoMapperProfiles()
        {
            @foreach (var table in allTable)
            {
                Html.NewLine();
                var entityName =table.Name;
                @://@(entityName) 配置
                foreach (var dto in allDtos)
                {
                    var dtoName = project.GetBuilder(dto).GetName(table.Name);
                    @:CreateMap<@($"{entityName},{dtoName}")>();
                    @:CreateMap<@($"{dtoName},{entityName}")>();
                    Html.NewLine();
                }
                Html.NewLine();
                Html.NewLine();

            }
         }
      }
}