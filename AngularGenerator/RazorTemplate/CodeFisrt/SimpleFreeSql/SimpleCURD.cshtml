@using FreeSql.TemplateEngine
@model FreeSql.TemplateEngine.BuildTask
@{
    Layout = "../_Layout.cshtml";
    var project = Model.Project;
    var table = Model.CurrentTable;
}


using System;
using System.Collections.Generic;
using System.Text;
using GRES.Abstractes.Repositories;
using GRES.Framework.Services;
using System.Linq;
using Microsoft.Extensions.DependencyInjection;

namespace @(project.ProjectInfo.ProjectName).Implaments.Services
{
@($"{(string.IsNullOrWhiteSpace(table.Comment) ? table.Name : table.Comment)}服务".GetCSharpSummary())
    public class  @(project.GetBuilder("SimpleCURD").GetName(table.Name)) : I@(project.GetBuilder("SimpleCURD").GetName(table.Name))
    {
    private readonly IFreeSql<@($"{project.ProjectInfo.ProjectName}DbContext")>  _freeSql;
    @("构造函数".GetCSharpSummary())
    public @(project.GetBuilder("SimpleCURD").GetName(table.Name))(IServiceProvider service):base(service)
    {
    _freeSql = service.GetRequiredService@($"<IFreeSql<{project.ProjectInfo.ProjectName}DbContext")>>()");
    }

    @{ await Html.RenderPartialAsync("CURD/_CURD.cshtml", new CurdTask(Model,table)); }
    @foreach (var navigate in table.NavigateInfos)
    {
        
       @:@{ await Html.RenderPartialAsync("CURD/_CURD.cshtml", new CurdTask(Model,navigate?.NavigateTableInfo)); }
    }
    }
}
